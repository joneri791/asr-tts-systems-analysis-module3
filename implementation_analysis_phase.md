# Фаза реализации и анализа

## Описание

Фаза реализации и анализа включает в себя инструменты для загрузки собранных данных в базу данных, выполнения сложных SQL-запросов для анализа и создания визуализаций результатов.

## Инструменты

### Python библиотеки:
- **requests, beautifulsoup4** - для парсинга данных
- **sqlalchemy, psycopg2** - для работы с базой данных
- **pandas** - для анализа данных
- **matplotlib, seaborn, plotly** - для визуализации
- **jupyter** - для интерактивного анализа

### Базы данных:
- **PostgreSQL** - для продакшн использования
- **SQLite** - для разработки и тестирования

## Структура фазы

### 1. Инструменты для работы с БД (`database_tools/`)

#### `database_config.py`
- Конфигурация подключения к базе данных
- Поддержка PostgreSQL и SQLite
- Настройка через переменные окружения

#### `models.py`
- SQLAlchemy модели для всех сущностей
- Связи между таблицами
- Автоматическое создание схемы

#### `data_loader.py`
- Загрузка JSON данных в базу данных
- Автоматическое создание связей
- Обработка ошибок и валидация

### 2. Анализ данных (`analysis/`)

#### `data_analysis.py`
- Сложные SQL-запросы для анализа
- Методы для извлечения трендов
- Статистический анализ метрик

#### `interactive_analysis.ipynb`
- Jupyter notebook для интерактивного анализа
- Интерактивные графики с Plotly
- Автоматические выводы и рекомендации

### 3. Визуализация (`visualization/`)

#### `visualization.py`
- Статические графики с matplotlib/seaborn
- Интерактивные графики с Plotly
- Экспорт в различные форматы

## Ключевые SQL-запросы

### 1. Анализ зависимости WER от года публикации
```sql
SELECT 
    s.год_первого_релиза,
    sm.значение as wer_value,
    sm.датасет,
    s.название as model_name,
    s.архитектура
FROM systems s
JOIN system_metrics sm ON s.id = sm.system_id
WHERE sm.метрика_тип = 'WER' 
    AND s.год_первого_релиза IS NOT NULL
    AND sm.значение IS NOT NULL
    AND sm.значение > 0
ORDER BY s.год_первого_релиза, sm.значение
```

### 2. Анализ зависимости MOS от года публикации
```sql
SELECT 
    s.год_первого_релиза,
    sm.значение as mos_value,
    sm.датасет,
    s.название as model_name,
    s.архитектура
FROM systems s
JOIN system_metrics sm ON s.id = sm.system_id
WHERE sm.метрика_тип = 'MOS' 
    AND s.год_первого_релиза IS NOT NULL
    AND sm.значение IS NOT NULL
    AND sm.значение > 0
ORDER BY s.год_первого_релиза, sm.значение DESC
```

### 3. Топ разработчики по количеству систем
```sql
SELECT 
    разработчик,
    COUNT(*) as system_count,
    AVG(количество_скачиваний) as avg_downloads,
    SUM(количество_скачиваний) as total_downloads
FROM systems
WHERE разработчик IS NOT NULL AND разработчик != ''
GROUP BY разработчик
ORDER BY system_count DESC, total_downloads DESC
LIMIT 10
```

### 4. Анализ результатов бенчмарков
```sql
SELECT 
    b.название as benchmark_name,
    b.датасет,
    br.метрика_тип,
    br.значение,
    br.ранг,
    s.название as model_name,
    s.архитектура,
    s.год_первого_релиза
FROM benchmarks b
JOIN benchmark_results br ON b.id = br.benchmark_id
JOIN systems s ON br.system_id = s.id
WHERE br.ранг <= 5
ORDER BY b.название, br.ранг
```

### 5. Тренды по годам
```sql
SELECT 
    год_первого_релиза,
    COUNT(*) as systems_count,
    AVG(количество_скачиваний) as avg_downloads,
    COUNT(DISTINCT разработчик) as unique_developers
FROM systems
WHERE год_первого_релиза IS NOT NULL
    AND год_первого_релиза >= 2010
GROUP BY год_первого_релиза
ORDER BY год_первого_релиза
```

## Визуализации

### 1. График зависимости WER от года публикации
- **Цель**: Показать улучшение качества ASR систем со временем
- **Тип**: Scatter plot с линией тренда
- **Метрики**: WER по годам, группировка по датасетам

### 2. График зависимости MOS от года публикации
- **Цель**: Показать улучшение качества TTS систем со временем
- **Тип**: Scatter plot с линией тренда
- **Метрики**: MOS по годам, группировка по датасетам

### 3. Распределение архитектур
- **Цель**: Показать популярность различных архитектур
- **Тип**: Horizontal bar chart
- **Метрики**: Количество систем по архитектурам

### 4. Топ разработчики
- **Цель**: Показать наиболее активных разработчиков
- **Тип**: Vertical bar chart
- **Метрики**: Количество систем по разработчикам

### 5. Тренды по годам
- **Цель**: Показать развитие области во времени
- **Тип**: Line chart с двумя осями Y
- **Метрики**: Количество систем и средние скачивания

### 6. Сравнение бенчмарков
- **Цель**: Сравнить результаты в различных бенчмарках
- **Тип**: Scatter plot по рангам
- **Метрики**: Результаты по рангам для каждого бенчмарка

## Интерактивные возможности

### Jupyter Notebook
- Интерактивные графики с Plotly
- Возможность изменения параметров анализа
- Автоматические выводы и рекомендации
- Экспорт результатов в различные форматы

### Plotly графики
- Интерактивные hover-подсказки
- Возможность масштабирования и панорамирования
- Фильтрация данных
- Экспорт в HTML для веб-отображения

## Автоматические выводы

Система автоматически анализирует данные и выдает выводы:

1. **Тренды качества**: Улучшается ли WER/MOS со временем
2. **Лучшие модели**: Какие модели показывают лучшие результаты
3. **Популярные архитектуры**: Какие архитектуры наиболее распространены
4. **Активные разработчики**: Кто создает больше всего систем
5. **Рекомендации**: На что обратить внимание при выборе систем

## Запуск анализа

### Полный анализ:
```bash
python run_analysis.py
```

### Отдельные компоненты:
```bash
# Загрузка данных
cd database_tools && python data_loader.py

# Анализ
cd analysis && python data_analysis.py

# Визуализация
cd visualization && python visualization.py

# Интерактивный анализ
jupyter notebook analysis/interactive_analysis.ipynb
```

## Результаты

После выполнения анализа создаются:

1. **База данных** с загруженными данными
2. **Статические графики** в формате PNG
3. **Интерактивные графики** в формате HTML
4. **Логи анализа** с подробной информацией
5. **Сводка результатов** с ключевыми выводами

Все результаты готовы для использования в отчетах, презентациях и дальнейших исследованиях.
